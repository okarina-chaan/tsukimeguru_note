<section class="min-h-screen py-10 px-4 text-base-content" style="background-color: #1c1b2f;">
  <header class="text-center mb-10">
    <h1 class="text-3xl font-bold mb-2" style="color: #f6b87e;">æ—¥è¨˜ã‚’ç·¨é›†ã™ã‚‹</h1>
    <p class="text-sm opacity-70" style="color: #f4ecd8;">
      <%= l(@daily_note.date, format: :long) %> ã®è¨˜éŒ²
    </p>
  </header>

  <div class="max-w-2xl mx-auto space-y-6">
    <%= form_with model: @daily_note, local: true, data: { controller: "diary-entry" } do |f| %>

      <div class="card shadow-lg p-6 rounded-2xl space-y-6" style="background-color: #2a274e;">
        <h2 class="text-xl font-semibold flex items-center gap-2" style="color: #b19dd5;">
          ã“ã®æ—¥ã®èª¿å­ã¨æ°—åˆ†
        </h2>

        <div data-diary-entry-target="healthSection" data-group="health">
          <div class="flex justify-between items-center mb-3">
            <span class="text-sm" style="color: #f4ecd8; opacity: 0.8;">ä½“èª¿</span>
            <span class="text-4xl" data-diary-entry-target="healthEmoji">ğŸ˜</span>
          </div>

          <div class="grid grid-cols-5 gap-2">
            <% [1, 2, 3, 4, 5].each do |value| %>
              <button
                type="button"
                data-action="click->diary-entry#selectHealth"
                data-value="<%= value %>"
                data-group="health"
                class="score-btn flex flex-col items-center justify-center p-3 rounded-lg transition-all border border-base-content border-opacity-10"
                style="background-color: #1c1b2f;"
              >
                <span class="text-3xl mb-1"><%= %w[ğŸ˜° ğŸ˜” ğŸ˜ ğŸ˜Š ğŸ¥°][value - 1] %></span>
                <span class="text-xs" style="color: #f4ecd8; opacity: 0.6;"><%= value %></span>
              </button>
            <% end %>
          </div>

          <%= f.hidden_field :condition_score, data: { diary_entry_target: "healthInput" } %>
        </div>

        <div data-diary-entry-target="moodSection" data-group="mood">
          <div class="flex justify-between items-center mb-3">
            <span class="text-sm" style="color: #f4ecd8; opacity: 0.8;">æ°—åˆ†</span>
            <span class="text-4xl" data-diary-entry-target="moodEmoji">ğŸ˜</span>
          </div>

          <div class="grid grid-cols-5 gap-2">
            <% [1, 2, 3, 4, 5].each do |value| %>
              <button
                type="button"
                data-action="click->diary-entry#selectMood"
                data-value="<%= value %>"
                data-group="mood"
                class="score-btn flex flex-col items-center justify-center p-3 rounded-lg transition-all border border-base-content border-opacity-10"
                style="background-color: #1c1b2f;"
              >
                <span class="text-3xl mb-1"><%= %w[ğŸ˜° ğŸ˜” ğŸ˜ ğŸ˜Š ğŸ¥°][value - 1] %></span>
                <span class="text-xs" style="color: #f4ecd8; opacity: 0.6;"><%= value %></span>
              </button>
            <% end %>
          </div>

          <%= f.hidden_field :mood_score, data: { diary_entry_target: "moodInput" } %>
        </div>
      </div>

      <div class="card shadow-lg p-6 rounded-2xl space-y-4" style="background-color: #2a274e;">
        <h2 class="text-xl font-semibold" style="color: #b19dd5;"> ä»Šæ—¥ã‚„ã£ãŸã“ã¨</h2>
        <%= f.text_field :did_today,
          placeholder: "ä»Šæ—¥ã‚„ã£ãŸã“ã¨ã‚’å…¥åŠ›",
          class: "w-full px-4 py-3 rounded border bg-base-100 text-base-content" %>
      </div>

      <div class="card shadow-lg p-6 rounded-2xl space-y-4" style="background-color: #2a274e;">
        <h2 class="text-xl font-semibold" style="color: #b19dd5;"> ã†ã¾ãã„ã‹ãªã‹ã£ãŸã“ã¨</h2>
        <%= f.text_field :challenge,
          placeholder: "ã†ã¾ãã„ã‹ãªã‹ã£ãŸã“ã¨ã‚’å…¥åŠ›",
          class: "w-full px-4 py-3 rounded border bg-base-100 text-base-content" %>
      </div>

      <div class="card shadow-lg p-6 rounded-2xl space-y-4" style="background-color: #2a274e;">
        <h2 class="text-xl font-semibold" style="color: #b19dd5;">ğŸ’«ã‚ˆã‹ã£ãŸã“ã¨</h2>
        <%= f.text_field :good_things,
          placeholder: "ã‚ˆã‹ã£ãŸã“ã¨ã‚’å…¥åŠ›",
          class: "w-full px-4 py-3 rounded border bg-base-100 text-base-content" %>
      </div>

      <div class="card shadow-lg p-6 rounded-2xl space-y-4" style="background-color: #2a274e;">
        <h2 class="text-xl font-semibold" style="color: #b19dd5;"> æ˜æ—¥ã‚„ã£ã¦ã¿ãŸã„ã“ã¨</h2>
        <%= f.text_field :try_tomorrow,
          placeholder: "æ˜æ—¥ã‚„ã£ã¦ã¿ãŸã„ã“ã¨ã‚’å…¥åŠ›",
          class: "w-full px-4 py-3 rounded border bg-base-100 text-base-content" %>
      </div>

      <div class="card shadow-lg p-6 rounded-2xl space-y-4" style="background-color: #2a274e;">
        <h2 class="text-xl font-semibold" style="color: #b19dd5;">ğŸ“ãƒ¡ãƒ¢</h2>
        <%= f.text_area :memo,
          rows: 6,
          placeholder: "æ„Ÿã˜ãŸã“ã¨ã‚„æ°—ã¥ãã‚’è‡ªç”±ã«...",
          class: "w-full px-4 py-3 rounded border bg-base-100 text-base-content" %>
      </div>

      <div class="text-center pt-6 pb-4 space-x-4">
        <%= f.submit "æ›´æ–°ã™ã‚‹",
          class: "btn px-10 text-base rounded-lg transition-colors",
          style: "background-color: #f6b87e; color: #2b2020; border: none;" %>
        <%= link_to "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
          daily_notes_path,
          class: "btn btn-ghost",
          style: "color: #f4ecd8;" %>
      </div>
    <% end %>
  </div>
</section>

<style>
  .score-btn.active {
    background-color: rgba(177, 157, 213, 0.2) !important;
    border: 2px solid #b19dd5 !important;
  }
  .score-btn.active span:first-child {
    transform: scale(1.1);
  }
</style>
